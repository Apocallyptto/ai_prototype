# === Alpaca credentials ===
ALPACA_API_KEY=PKA6F23FA4LNXAURY9JF
ALPACA_API_SECRET=4kemL0Ubaplgw4DP4CSPJFvUQmm7FCLvvXEyzQDs
APCA_API_BASE_URL=https://paper-api.alpaca.markets

# === Database ===
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/trader
DB_URL=postgresql://postgres:postgres@postgres:5432/trader

# === Core symbols / cadence ===
SYMBOLS=AAPL,MSFT,SPY,NVDA,AMD
EXEC_MIN_STRENGTH=0.50
EXEC_SINCE_MIN=20

# === Risk management ===
RISK_PER_TRADE_USD=50
MIN_ACCOUNT_BP_USD=100

# === ATR / TP-SL config ===
TP_ATR_MULT=1.5
SL_ATR_MULT=1.0
ATR_PERIOD=14
ATR_LOOKBACK_DAYS=30

# === Trailing ATR exits ===
TRAIL_ENABLE=1
TRAIL_TRIGGER_ATR_BLANK=0.5
TRAIL_MULT_ATR_BLANK=1.0
TRAIL_PERIOD=14
TRAIL_LOOKBACK_DAYS=30
TRAIL_NEVER_BELOW_ENTRY=1

# === Weekly auto-retrain ===
ENABLE_WEEKLY_RETRAIN=1
RETRAIN_DAY=SUN
RETRAIN_HOUR=23
RETRAIN_MINUTE=0
RETRAIN_TZ=Europe/Bratislava
RETRAIN_WINDOW_MINUTES=20
RETRAIN_MIN_GAP_DAYS=6

# === Execution & spread filters ===
MAX_SPREAD_PCT=0.15
MAX_SPREAD_ABS=0.12
QUOTE_PRICE_SLIPPAGE=0.02    # +2c buy / -2c sell quote bump

# === Market hours control ===
ALLOW_AFTER_HOURS=0          # do NOT trade when market closed
ACCOUNT_FALLBACK_TO_CASH=1   # use cash if BP=0 on paper

# === Position policy ===
FRACTIONAL=1
ALLOW_FRACTIONAL_SHORTS=0
LONG_ONLY=0                  # 0 = allow both BUY & SELL
MIN_QTY=0.01

# === Partial fills & stale order handling ===
PARTIAL_MAX_AGE_SEC=300
REPRICE_AFTER_SEC=180
REPRICE_MAX_TRIES=2
TICK_SIZE=0.01
# --- OCO (Take-Profit / Stop-Loss) ---
TP_MULTIPLIER=1.5
SL_MULTIPLIER=1.0
TP_MULT=1.5
SL_MULT=1.0

EXIT_MONITOR_POLL_SECONDS=15
DRY_RUN=0

STALE_AFTER_SECONDS=300
REPRICE_EVERY_SECONDS=90
MAX_REPRICES=4
CANCEL_AFTER_REPRICES=1

# --- Signals Runner ---
MIN_STRENGTH=0.60
SIGNAL_POLL_SECONDS=20
FIXED_QTY=0.05
# OR: NOTIONAL_USD=10      # (use one or the other)
PORTFOLIO_ID=paper-core  # optional, filters only matching signals
